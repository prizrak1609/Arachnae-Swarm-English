<?xml version="1.0" encoding="utf-8" ?>
<Defs>
  <ThingDef ParentName="MedicineBase">
    <defName>ARA_Medicine</defName>
    <label>阿拉克涅愈合素</label>
    <description>由阿拉克涅医药孵化茧所孵化的药物，效力等同于常规的医药，但是需要在冷藏条件下保存。</description>
    <possessionCount>10</possessionCount>
    <graphicData>
      <texPath>ArachnaeSwarm/Item/ARA_Medicine</texPath>
      <graphicClass>Graphic_Single</graphicClass>
      <drawSize>0.85</drawSize>
    </graphicData>
    <techLevel>Medieval</techLevel>
    <statBases>
      <MarketValue>10</MarketValue>
      <Mass>0.5</Mass>
      <Flammability>1</Flammability>
      <MedicalPotency>1</MedicalPotency>
      <MedicalQualityMax>1.00</MedicalQualityMax>
      <DeteriorationRate>2</DeteriorationRate>
      <WorkToMake>700</WorkToMake>
      <ARA_IncubationCost>10</ARA_IncubationCost>
      <ARA_IncubationTime>2</ARA_IncubationTime>
    </statBases>
    <tickerType>Rare</tickerType>
    <comps>
      <li Class="CompProperties_Rottable">
        <daysToRotStart>150</daysToRotStart>
        <rotDestroys>true</rotDestroys>
      </li>
      <li Class="ArachnaeSwarm.CompProperties_ExtraIncubationInfo">
        <cocoonDefs>
          <li>ARA_Cocoon_Medicine</li>
          <li>ARA_Cocoon_Medicine_From_Death</li>
          <li>ARA_BioforgeIncubator_Thing</li>
        </cocoonDefs>
      </li>
    </comps>
    <allowedArchonexusCount>20</allowedArchonexusCount>
  </ThingDef>
  
  <!-- ==================== 信息素 ==================== -->
  <ThingDef ParentName="MakeableDrugPillBase">
    <defName>ARA_PheromoneSolvent</defName>
    <label>阿拉克涅信息素溶剂</label>
    <description>一种合成的化学制剂，能够模拟阿拉克涅虫群内部用于区分敌我的信息素。定期注射可以欺骗宿主体内的寄生虫，使其进入休眠的共生状态，从而抑制其致命的增殖行为。</description>
    <descriptionHyperlinks>
      <HediffDef>ARA_SymbioticStabilizer</HediffDef>
      <HediffDef>ARA_MimicNematode</HediffDef>
    </descriptionHyperlinks>
    <graphicData>
      <texPath>ArachnaeSwarm/Item/ARA_PheromoneSolvent</texPath>
      <graphicClass>Graphic_Single</graphicClass>
      <shaderType>TransparentPostLight</shaderType>
    </graphicData>
    <rotatable>false</rotatable>
    <statBases>
      <WorkToMake>1000</WorkToMake>
      <MarketValue>50</MarketValue>
      <Mass>0.01</Mass>
      <ARA_IncubationCost>30</ARA_IncubationCost>
      <ARA_IncubationTime>8</ARA_IncubationTime>
    </statBases>
    <techLevel>Medieval</techLevel>
    <ingestible>
      <drugCategory>Medical</drugCategory> <!-- 定义为医疗品，而非娱乐品 -->
      <outcomeDoers>
        <li Class="IngestionOutcomeDoer_GiveHediff">
          <hediffDef>ARA_SymbioticStabilizer</hediffDef>
          <severity>1.0</severity> <!-- 每次服用直接将效果补满 -->
        </li>
      </outcomeDoers>
    </ingestible>
    <recipeMaker>
      <researchPrerequisite>ARA_Technology_2MED</researchPrerequisite> <!-- 假设需要基础制药解锁 -->
      <recipeUsers Inherit="False"/>
    </recipeMaker>
    <costList>
      <ARA_InsectJelly>5</ARA_InsectJelly> <!-- 使用虫胶作为特色材料 -->
    </costList>
    <comps>
      <li Class="CompProperties_Drug">
        <chemical>ARA_Pheromone</chemical>
        <addictiveness>0.05</addictiveness>
        <needLevelOffset>1</needLevelOffset>
        <listOrder>1000</listOrder>
      </li>
      <li Class="ArachnaeSwarm.CompProperties_ExtraIncubationInfo">
        <cocoonDefs>
          <li>ARA_Cocoon_Medicine</li>
          <li>ARA_Cocoon_Medicine_From_Death</li>
          <li>ARA_BioforgeIncubator_Thing</li>
        </cocoonDefs>
      </li>
    </comps>
  </ThingDef>
  <HediffDef>
    <defName>ARA_SymbioticStabilizer</defName>
    <label>信息素抑制</label>
    <labelNoun>一种信息素抑制效果</labelNoun>
    <description>阿拉克涅信息素溶剂的效果正在生效，它模拟了虫群的共生信号，抑制了体内寄生体的活性。在溶剂生效时，不会使得拟线种虫族寄生的进度超过80%。</description>
    <hediffClass>HediffWithComps</hediffClass>
    <defaultLabelColor>(0.7, 1.0, 0.7)</defaultLabelColor>
    <isBad>false</isBad>
    <comps>
      <li Class="HediffCompProperties_SeverityPerDay">
        <severityPerDay>-0.34</severityPerDay> <!-- 严重性每天降低0.34，大约3天从1.0掉到0 -->
        <showHoursToRecover>true</showHoursToRecover>
      </li>
    </comps>
  </HediffDef>
  
  <ChemicalDef>
    <defName>ARA_Pheromone</defName>
    <label>阿拉克涅信息素</label>
    <addictionHediff>ARA_PheromoneAddiction</addictionHediff>
  </ChemicalDef>
  <NeedDef ParentName="DrugAddictionNeedBase">
    <defName>Chemical_ARA_Pheromone</defName>
    <needClass>Need_Chemical</needClass>
    <label>信息素依赖</label>
    <description>由于长期使用阿拉克涅信息素溶剂，此人的身体已经习惯了这种外部信息素的存在。如果中断使用，体内的拟线虫将因为失去抑制而猛烈反扑。</description>
    <fallPerDay>0.333</fallPerDay>
    <listPriority>50</listPriority>
  </NeedDef>
  <HediffDef ParentName="AddictionBase">
    <defName>ARA_PheromoneAddiction</defName>
    <label>信息素依赖</label>
    <description>对阿拉克涅信息素溶剂产生了化学依赖。需要定期使用来维持体内的拟线虫生态平衡，否则会产生严重的戒断反应。</description>
    <hediffClass>Hediff_Addiction</hediffClass>
    <chemicalNeed>Chemical_ARA_Pheromone</chemicalNeed>
    <stages>
      <li>
        <!-- 需求满足时，无效果 -->
      </li>
      <li>
        <label>戒断反应</label>
        <capMods>
          <li>
            <capacity>Consciousness</capacity>
            <offset>-0.1</offset>
          </li>
        </capMods>
       <hediffGivers>
          <li Class="ArachnaeSwarm.HediffGiver_RandomWithSeverity">
            <hediff>ARA_MimicNematode</hediff>
            <mtbDays>1</mtbDays>
            <severityRange>0.1~0.2</severityRange>
          </li>
        </hediffGivers>
      </li>
    </stages>
  </HediffDef>
  <ThoughtDef>
    <defName>ARA_PheromoneWithdrawal</defName>
    <workerClass>ThoughtWorker_Hediff</workerClass>
    <hediff>ARA_PheromoneAddiction</hediff>
    <validWhileDespawned>true</validWhileDespawned>
    <stages>
      <li>
        <visible>false</visible>
      </li>
      <li>
        <label>信息素戒断</label>
        <description>我感觉很糟糕，体内的某些东西正在变得活跃......我需要信息素溶剂。</description>
        <baseMoodEffect>-15</baseMoodEffect>
      </li>
    </stages>
  </ThoughtDef>
</Defs>